<style type="text/css">
.selectBox {
    bottom: 70px;
    cursor: pointer;
    position: absolute;
    left: 50%;
    width: 250px;
    z-index: 10;
    margin-left: -125px;
}
.selectBox__desk-options li {
    text-align: center;
}

@media (max-width: 768px) {
  .selectBox {
     margin-left: 0;
  }
  .selectBox__native {
    font-size: 16px;
  }
}
</style>

<div class="newHomepage__section">
    <div class="hpFullWidthBannerForDropdown">
        <div class="hpFullWidthBannerForDropdown__contentWrapper">
            <div class="hpFullWidthBannerForDropdown__titleWrapper">
                <picture class="hpFullWidthBannerForDropdown__imageWrapper">
                    <source srcset="https://navabi.imgix.net/img/index/2018/05/clearance_fr-d.jpg?w=1170&fit=clip&q=75, https://navabi.imgix.net/img/index/2018/05/clearance_fr-d.jpg?w=2340&fit=clip&q=75 2x" media="(min-width: 991px)">
                    <source srcset="https://navabi.imgix.net/img/index/2018/05/clearance_fr-d.jpg?w=768&fit=clip&q=75, https://navabi.imgix.net/img/index/2018/05/clearance_fr-d.jpg?w=1536&fit=clip&q=75 2x" media="(min-width: 769px)">
                    <source srcset="https://navabi.imgix.net/img/index/2018/05/clearance_fr-m.jpg?w=768&fit=clip&q=75, https://navabi.imgix.net/img/index/2018/05/clearance_fr-m.jpg?w=1536&fit=clip&q=75 2x" media="(min-width: 0px)">
                    <img class="hpFullWidthBanner__image" srcset="https://navabi.imgix.net/img/index/2018/05/clearance_fr-d.jpg?w=768&fit=clip&q=75" alt="">
                </picture>
            </div>
        </div>
        <div class="selectBox" data-js-selectbox>
            <ul class="selectBox__desk-options"></ul>
            <div class="selectBox__label"><b>Vers les liquidations ></b></div>
            <select class="selectBox__native" id="selectBox__native" onchange="oldGAlinkTracking($(this).val(), $(this).find('option:selected').data('tracking'))">
                <option style="display: none">Vers les liquidations ></option>
                <option value="https://www.navabi.fr/theme/jusqua-60-pourcent/" data-tracking='["/Teaser/Start", "/3.1.0", "/shopSALEbyDiscount/60", 2]'>
                    Jusqu'à -60% >
                </option>
                <option value="https://www.navabi.fr/theme/jusqua-50-pourcent/" data-tracking='["/Teaser/Start", "/3.1.0", "/shopSALEbyDiscount/50", 2]'>
                    Jusqu'à -50% >
                </option>
                <option value="https://www.navabi.fr/theme/jusqua-40-pourcent/" data-tracking='["/Teaser/Start", "/3.1.0", "/shopSALEbyDiscount/40", 2]'>
                    Jusqu'à -40% >
                </option>
            </select>
        </div>
    </div>
</div>

<script>
$('[data-js-selectbox]').each(function () {
    var thatParent = $(this);
    thatParent.find('select option:not(:first)').each(function () {
        var that = $(this);
        var thatHref = $(this).val();
        var thatTracking = $(this).attr('data-tracking');
        
        thatParent.find('.selectBox__desk-options').append("<li><a href='" + thatHref + "' data-tracking='" + thatTracking + "'>" + that.text() + "</a></li>");
    });
});

if (!$('html').hasClass('dev-smartphone')) {
    $('[data-js-selectbox]')
    .on('mouseenter', function () {
        if ($('.selectBox__desk-options').is(':not(:animated)')) {
            $(this).find('.selectBox__desk-options').slideDown(250);
        }
    })
    .on('mouseleave', function () {
        if ($('.selectBox__desk-options').is(':not(:animated)')) {
            $(this).find('.selectBox__desk-options').slideUp(250);
        }
    });
}

var selectEl = document.getElementById('selectBox__native');

selectEl.onchange = function(){
    window.location = this.value;
};
</script>
